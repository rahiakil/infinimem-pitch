<svg width="1600" height="1200" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="1600" height="1200" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="800" y="40" text-anchor="middle" font-family="Arial, sans-serif" font-size="28" font-weight="bold" fill="#2c3e50">
    Context Window Memory Packing &amp; Budget Management
  </text>
  
  <!-- Subtitle -->
  <text x="800" y="70" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" fill="#7f8c8d">
    From Simple Sequential Packing to Complex Hierarchical Selection Challenges
  </text>
  
  <!-- Context Window Size Comparison -->
  <g transform="translate(100, 100)">
    <text x="650" y="30" text-anchor="middle" font-family="Arial" font-size="20" font-weight="bold" fill="#2c3e50">
      CONTEXT WINDOW SIZE COMPARISON
    </text>
    
    <!-- 64K Context Window -->
    <rect x="50" y="50" width="400" height="100" fill="#3498db" stroke="#2980b9" stroke-width="2" rx="5"/>
    <text x="250" y="75" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="white">
      64K Context Window
    </text>
    <text x="250" y="95" text-anchor="middle" font-family="Arial" font-size="12" fill="#ecf0f1">
      ~48,000 words • ~96 pages
    </text>
    <text x="250" y="115" text-anchor="middle" font-family="Arial" font-size="12" fill="#ecf0f1">
      GPT-4 Turbo, Claude 2
    </text>
    <text x="250" y="135" text-anchor="middle" font-family="Arial" font-size="10" fill="#d6eaf8">
      Budget: Medium conversation length
    </text>
    
    <!-- 200K Context Window -->
    <rect x="500" y="50" width="800" height="100" fill="#27ae60" stroke="#1e8449" stroke-width="2" rx="5"/>
    <text x="900" y="75" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="white">
      200K Context Window
    </text>
    <text x="900" y="95" text-anchor="middle" font-family="Arial" font-size="12" fill="#d5f4e6">
      ~150,000 words • ~300 pages • Full book length
    </text>
    <text x="900" y="115" text-anchor="middle" font-family="Arial" font-size="12" fill="#d5f4e6">
      Claude 3, GPT-4 Turbo (extended)
    </text>
    <text x="900" y="135" text-anchor="middle" font-family="Arial" font-size="10" fill="#a9dfbf">
      Budget: Extended conversations + documents
    </text>
  </g>
  
  <!-- Sequential Memory Packing (Naive Approach) -->
  <g transform="translate(100, 280)">
    <text x="650" y="30" text-anchor="middle" font-family="Arial" font-size="20" font-weight="bold" fill="#e74c3c">
      NAIVE SEQUENTIAL PACKING (Current Approach)
    </text>
    <text x="650" y="55" text-anchor="middle" font-family="Arial" font-size="14" fill="#7f8c8d">
      Information packed chronologically - First In, First Out (FIFO) when full
    </text>
    
    <!-- Memory blocks in sequence -->
    <g transform="translate(0, 80)">
      <!-- System Prompt -->
      <rect x="0" y="0" width="100" height="60" fill="#9b59b6" stroke="#8e44ad" stroke-width="2" rx="3"/>
      <text x="50" y="20" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="white">
        System Prompt
      </text>
      <text x="50" y="35" text-anchor="middle" font-family="Arial" font-size="9" fill="#e8daef">
        1,200 tokens
      </text>
      <text x="50" y="50" text-anchor="middle" font-family="Arial" font-size="9" fill="#e8daef">
        FIXED
      </text>
      
      <!-- User Message 1 -->
      <rect x="110" y="0" width="80" height="60" fill="#3498db" stroke="#2980b9" stroke-width="1" rx="3"/>
      <text x="150" y="20" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="white">
        User Msg 1
      </text>
      <text x="150" y="35" text-anchor="middle" font-family="Arial" font-size="9" fill="#d6eaf8">
        500 tokens
      </text>
      <text x="150" y="50" text-anchor="middle" font-family="Arial" font-size="8" fill="#d6eaf8">
        "Hello, help me..."
      </text>
      
      <!-- Assistant Response 1 -->
      <rect x="200" y="0" width="120" height="60" fill="#27ae60" stroke="#1e8449" stroke-width="1" rx="3"/>
      <text x="260" y="20" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="white">
        Assistant Resp 1
      </text>
      <text x="260" y="35" text-anchor="middle" font-family="Arial" font-size="9" fill="#d5f4e6">
        1,800 tokens
      </text>
      <text x="260" y="50" text-anchor="middle" font-family="Arial" font-size="8" fill="#d5f4e6">
        "I'd be happy to help..."
      </text>
      
      <!-- User Message 2 -->
      <rect x="330" y="0" width="80" height="60" fill="#3498db" stroke="#2980b9" stroke-width="1" rx="3"/>
      <text x="370" y="20" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="white">
        User Msg 2
      </text>
      <text x="370" y="35" text-anchor="middle" font-family="Arial" font-size="9" fill="#d6eaf8">
        300 tokens
      </text>
      <text x="370" y="50" text-anchor="middle" font-family="Arial" font-size="8" fill="#d6eaf8">
        "Can you also..."
      </text>
      
      <!-- Continue pattern -->
      <rect x="420" y="0" width="100" height="60" fill="#27ae60" stroke="#1e8449" stroke-width="1" rx="3"/>
      <text x="470" y="25" text-anchor="middle" font-family="Arial" font-size="10" fill="white">
        Assistant Resp 2
      </text>
      <text x="470" y="40" text-anchor="middle" font-family="Arial" font-size="9" fill="#d5f4e6">
        1,200 tokens
      </text>
      
      <rect x="530" y="0" width="70" height="60" fill="#3498db" stroke="#2980b9" stroke-width="1" rx="3"/>
      <text x="565" y="25" text-anchor="middle" font-family="Arial" font-size="9" fill="white">
        User Msg 3
      </text>
      <text x="565" y="40" text-anchor="middle" font-family="Arial" font-size="9" fill="#d6eaf8">
        400 tokens
      </text>
      
      <!-- More messages -->
      <rect x="610" y="0" width="90" height="60" fill="#27ae60" stroke="#1e8449" stroke-width="1" rx="3"/>
      <text x="655" y="25" text-anchor="middle" font-family="Arial" font-size="9" fill="white">
        Assistant 3
      </text>
      <text x="655" y="40" text-anchor="middle" font-family="Arial" font-size="9" fill="#d5f4e6">
        900 tokens
      </text>
      
      <rect x="710" y="0" width="80" height="60" fill="#3498db" stroke="#2980b9" stroke-width="1" rx="3"/>
      <text x="750" y="25" text-anchor="middle" font-family="Arial" font-size="9" fill="white">
        User Msg 4
      </text>
      <text x="750" y="40" text-anchor="middle" font-family="Arial" font-size="9" fill="#d6eaf8">
        600 tokens
      </text>
      
      <!-- Dots indicating more -->
      <text x="820" y="30" font-family="Arial" font-size="20" fill="#7f8c8d">...</text>
      
      <!-- More conversation -->
      <rect x="860" y="0" width="100" height="60" fill="#27ae60" stroke="#1e8449" stroke-width="1" rx="3"/>
      <text x="910" y="25" text-anchor="middle" font-family="Arial" font-size="9" fill="white">
        Recent Messages
      </text>
      <text x="910" y="40" text-anchor="middle" font-family="Arial" font-size="9" fill="#d5f4e6">
        2,500 tokens
      </text>
      
      <!-- Current message -->
      <rect x="970" y="0" width="120" height="60" fill="#f39c12" stroke="#d68910" stroke-width="2" rx="3"/>
      <text x="1030" y="20" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="white">
        CURRENT INPUT
      </text>
      <text x="1030" y="35" text-anchor="middle" font-family="Arial" font-size="9" fill="#fdeaa7">
        800 tokens
      </text>
      <text x="1030" y="50" text-anchor="middle" font-family="Arial" font-size="8" fill="#fdeaa7">
        "New request..."
      </text>
      
      <!-- Context window boundary -->
      <rect x="1100" y="0" width="200" height="60" fill="#e74c3c" stroke="#c0392b" stroke-width="3" rx="3" opacity="0.3"/>
      <text x="1200" y="25" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="#c0392b">
        OVERFLOW!
      </text>
      <text x="1200" y="40" text-anchor="middle" font-family="Arial" font-size="10" fill="#c0392b">
        64K limit reached
      </text>
      <text x="1200" y="55" text-anchor="middle" font-family="Arial" font-size="9" fill="#c0392b">
        Early context lost
      </text>
      
      <!-- Token budget indicator -->
      <rect x="0" y="70" width="1000" height="15" fill="#ecf0f1" stroke="#bdc3c7" stroke-width="1" rx="2"/>
      <rect x="0" y="70" width="800" height="15" fill="#2ecc71" rx="2"/>
      <rect x="800" y="70" width="200" height="15" fill="#e74c3c" rx="2"/>
      
      <text x="400" y="82" text-anchor="middle" font-family="Arial" font-size="10" fill="white">
        Used: 51,200 tokens
      </text>
      <text x="900" y="82" text-anchor="middle" font-family="Arial" font-size="10" fill="white">
        Overflow: 12,800
      </text>
    </g>
    
    <!-- Problems with naive approach -->
    <g transform="translate(0, 200)">
      <rect x="0" y="0" width="1300" height="80" fill="#ffebee" stroke="#e74c3c" stroke-width="2" rx="5"/>
      <text x="650" y="25" text-anchor="middle" font-family="Arial" font-size="16" font-weight="bold" fill="#e74c3c">
        PROBLEMS WITH NAIVE SEQUENTIAL PACKING
      </text>
      <text x="100" y="45" font-family="Arial" font-size="12" fill="#c62828">
        ❌ Important early context gets lost (FIFO truncation)
      </text>
      <text x="100" y="60" font-family="Arial" font-size="12" fill="#c62828">
        ❌ No prioritization - treats all information equally
      </text>
      <text x="700" y="45" font-family="Arial" font-size="12" fill="#c62828">
        ❌ Entire conversations disappear suddenly
      </text>
      <text x="700" y="60" font-family="Arial" font-size="12" fill="#c62828">
        ❌ No semantic understanding of importance
      </text>
    </g>
  </g>
  
  <!-- Hierarchical Tree Approach -->
  <g transform="translate(100, 600)">
    <text x="650" y="30" text-anchor="middle" font-family="Arial" font-size="20" font-weight="bold" fill="#8e44ad">
      HIERARCHICAL TREE APPROACH (Advanced but Problematic)
    </text>
    <text x="650" y="55" text-anchor="middle" font-family="Arial" font-size="14" fill="#7f8c8d">
      Tree structure with summaries, but memory manager struggles with selection
    </text>
    
    <!-- Tree Structure -->
    <g transform="translate(100, 80)">
      <!-- Root Summary -->
      <rect x="450" y="0" width="200" height="50" fill="#8e44ad" stroke="#7d3c98" stroke-width="2" rx="5"/>
      <text x="550" y="20" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="white">
        ROOT SUMMARY
      </text>
      <text x="550" y="35" text-anchor="middle" font-family="Arial" font-size="10" fill="#e8daef">
        Entire conversation (500 tokens)
      </text>
      
      <!-- Level 1 Summaries -->
      <rect x="200" y="100" width="150" height="45" fill="#9b59b6" stroke="#8e44ad" stroke-width="1" rx="3"/>
      <text x="275" y="118" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold" fill="white">
        Early Context
      </text>
      <text x="275" y="133" text-anchor="middle" font-family="Arial" font-size="9" fill="#e8daef">
        Summary (200 tokens)
      </text>
      
      <rect x="375" y="100" width="150" height="45" fill="#9b59b6" stroke="#8e44ad" stroke-width="1" rx="3"/>
      <text x="450" y="118" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold" fill="white">
        Mid Context
      </text>
      <text x="450" y="133" text-anchor="middle" font-family="Arial" font-size="9" fill="#e8daef">
        Summary (300 tokens)
      </text>
      
      <rect x="550" y="100" width="150" height="45" fill="#9b59b6" stroke="#8e44ad" stroke-width="1" rx="3"/>
      <text x="625" y="118" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold" fill="white">
        Recent Context
      </text>
      <text x="625" y="133" text-anchor="middle" font-family="Arial" font-size="9" fill="#e8daef">
        Summary (400 tokens)
      </text>
      
      <rect x="725" y="100" width="150" height="45" fill="#3498db" stroke="#2980b9" stroke-width="2" rx="3"/>
      <text x="800" y="118" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold" fill="white">
        Current Session
      </text>
      <text x="800" y="133" text-anchor="middle" font-family="Arial" font-size="9" fill="#d6eaf8">
        Full detail (15K tokens)
      </text>
      
      <!-- Level 2 Detailed Memories -->
      <g transform="translate(0, 170)">
        <!-- Early context details -->
        <rect x="150" y="0" width="60" height="35" fill="#a569bd" rx="2"/>
        <text x="180" y="15" text-anchor="middle" font-family="Arial" font-size="8" fill="white">Conv 1-3</text>
        <text x="180" y="25" text-anchor="middle" font-family="Arial" font-size="8" fill="white">2K tok</text>
        
        <rect x="220" y="0" width="60" height="35" fill="#a569bd" rx="2"/>
        <text x="250" y="15" text-anchor="middle" font-family="Arial" font-size="8" fill="white">Conv 4-6</text>
        <text x="250" y="25" text-anchor="middle" font-family="Arial" font-size="8" fill="white">1.8K</text>
        
        <rect x="290" y="0" width="60" height="35" fill="#a569bd" rx="2"/>
        <text x="320" y="15" text-anchor="middle" font-family="Arial" font-size="8" fill="white">Conv 7-9</text>
        <text x="320" y="25" text-anchor="middle" font-family="Arial" font-size="8" fill="white">2.2K</text>
        
        <!-- Mid context details -->
        <rect x="375" y="0" width="60" height="35" fill="#a569bd" rx="2"/>
        <text x="405" y="15" text-anchor="middle" font-family="Arial" font-size="8" fill="white">Conv 10-15</text>
        <text x="405" y="25" text-anchor="middle" font-family="Arial" font-size="8" fill="white">3K</text>
        
        <rect x="445" y="0" width="60" height="35" fill="#a569bd" rx="2"/>
        <text x="475" y="15" text-anchor="middle" font-family="Arial" font-size="8" fill="white">Conv 16-20</text>
        <text x="475" y="25" text-anchor="middle" font-family="Arial" font-size="8" fill="white">2.5K</text>
        
        <!-- Recent context details -->
        <rect x="550" y="0" width="60" height="35" fill="#5dade2" rx="2"/>
        <text x="580" y="15" text-anchor="middle" font-family="Arial" font-size="8" fill="white">Conv 21-25</text>
        <text x="580" y="25" text-anchor="middle" font-family="Arial" font-size="8" fill="white">4K</text>
        
        <rect x="620" y="0" width="60" height="35" fill="#5dade2" rx="2"/>
        <text x="650" y="15" text-anchor="middle" font-family="Arial" font-size="8" fill="white">Conv 26-30</text>
        <text x="650" y="25" text-anchor="middle" font-family="Arial" font-size="8" fill="white">3.5K</text>
        
        <!-- Current session details -->
        <rect x="725" y="0" width="50" height="35" fill="#3498db" rx="2"/>
        <text x="750" y="15" text-anchor="middle" font-family="Arial" font-size="8" fill="white">Msg 1</text>
        <text x="750" y="25" text-anchor="middle" font-family="Arial" font-size="8" fill="white">800</text>
        
        <rect x="785" y="0" width="50" height="35" fill="#3498db" rx="2"/>
        <text x="810" y="15" text-anchor="middle" font-family="Arial" font-size="8" fill="white">Resp 1</text>
        <text x="810" y="25" text-anchor="middle" font-family="Arial" font-size="8" fill="white">1.2K</text>
        
        <rect x="845" y="0" width="50" height="35" fill="#f39c12" rx="2"/>
        <text x="870" y="15" text-anchor="middle" font-family="Arial" font-size="8" fill="white">Msg 2</text>
        <text x="870" y="25" text-anchor="middle" font-family="Arial" font-size="8" fill="white">600</text>
      </g>
      
      <!-- Tree connections -->
      <line x1="550" y1="50" x2="275" y2="100" stroke="#7d3c98" stroke-width="1"/>
      <line x1="550" y1="50" x2="450" y2="100" stroke="#7d3c98" stroke-width="1"/>
      <line x1="550" y1="50" x2="625" y2="100" stroke="#7d3c98" stroke-width="1"/>
      <line x1="550" y1="50" x2="800" y2="100" stroke="#2980b9" stroke-width="2"/>
      
      <!-- Connections to detail level -->
      <line x1="275" y1="145" x2="180" y2="170" stroke="#8e44ad" stroke-width="1"/>
      <line x1="275" y1="145" x2="250" y2="170" stroke="#8e44ad" stroke-width="1"/>
      <line x1="275" y1="145" x2="320" y2="170" stroke="#8e44ad" stroke-width="1"/>
      
      <line x1="450" y1="145" x2="405" y2="170" stroke="#8e44ad" stroke-width="1"/>
      <line x1="450" y1="145" x2="475" y2="170" stroke="#8e44ad" stroke-width="1"/>
      
      <line x1="625" y1="145" x2="580" y2="170" stroke="#5dade2" stroke-width="1"/>
      <line x1="625" y1="145" x2="650" y2="170" stroke="#5dade2" stroke-width="1"/>
      
      <line x1="800" y1="145" x2="750" y2="170" stroke="#3498db" stroke-width="2"/>
      <line x1="800" y1="145" x2="810" y2="170" stroke="#3498db" stroke-width="2"/>
      <line x1="800" y1="145" x2="870" y2="170" stroke="#f39c12" stroke-width="2"/>
    </g>
    
    <!-- Memory Manager Confusion -->
    <g transform="translate(950, 80)">
      <rect x="0" y="0" width="250" height="150" fill="#fff3cd" stroke="#ffc107" stroke-width="2" rx="5"/>
      <text x="125" y="25" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="#856404">
        MEMORY MANAGER
      </text>
      <text x="125" y="40" text-anchor="middle" font-family="Arial" font-size="12" fill="#856404">
        😵 CONFUSED
      </text>
      
      <!-- Confused AI face -->
      <circle cx="125" cy="70" r="25" fill="#f0ad4e" stroke="#eea236" stroke-width="2"/>
      <circle cx="115" cy="65" r="3" fill="#856404"/>
      <circle cx="135" cy="65" r="3" fill="#856404"/>
      <path d="M 115 80 Q 125 75 135 80" stroke="#856404" stroke-width="2" fill="none"/>
      <text x="155" y="75" font-family="Arial" font-size="20" fill="#856404">?</text>
      
      <text x="125" y="110" text-anchor="middle" font-family="Arial" font-size="11" fill="#856404">
        "Which memories should
      </text>
      <text x="125" y="125" text-anchor="middle" font-family="Arial" font-size="11" fill="#856404">
        I keep for this query?"
      </text>
      <text x="125" y="145" text-anchor="middle" font-family="Arial" font-size="10" fill="#b7850b">
        No context understanding
      </text>
    </g>
    
    <!-- Selection problems -->
    <g transform="translate(0, 350)">
      <rect x="0" y="0" width="1300" height="120" fill="#ffeaa7" stroke="#fdcb6e" stroke-width="2" rx="5"/>
      <text x="650" y="25" text-anchor="middle" font-family="Arial" font-size="16" font-weight="bold" fill="#8b6914">
        TREE APPROACH PROBLEMS: Memory Manager Can't Choose Intelligently
      </text>
      
      <g transform="translate(50, 40)">
        <text x="0" y="20" font-family="Arial" font-size="12" fill="#8b6914">
          ❓ <tspan font-weight="bold">Selection Paralysis:</tspan> Too many memory nodes, no clear priority
        </text>
        <text x="0" y="40" font-family="Arial" font-size="12" fill="#8b6914">
          ❓ <tspan font-weight="bold">Context Ignorance:</tspan> Can't understand which memories relate to current query
        </text>
        <text x="0" y="60" font-family="Arial" font-size="12" fill="#8b6914">
          ❓ <tspan font-weight="bold">Compression Loss:</tspan> Important details lost in hierarchical summaries
        </text>
        <text x="0" y="80" font-family="Arial" font-size="12" fill="#8b6914">
          ❓ <tspan font-weight="bold">Relevance Blind:</tspan> No semantic understanding of memory importance
        </text>
        
        <text x="650" y="20" font-family="Arial" font-size="12" fill="#8b6914">
          ❓ <tspan font-weight="bold">Budget Overflow:</tspan> Still hits context limits with poor selection
        </text>
        <text x="650" y="40" font-family="Arial" font-size="12" fill="#8b6914">
          ❓ <tspan font-weight="bold">Static Hierarchy:</tspan> Tree structure doesn't adapt to query context  
        </text>
        <text x="650" y="60" font-family="Arial" font-size="12" fill="#8b6914">
          ❓ <tspan font-weight="bold">Granularity Mismatch:</tspan> Wrong level of detail for different queries
        </text>
        <text x="650" y="80" font-family="Arial" font-size="12" fill="#8b6914">
          ❓ <tspan font-weight="bold">Recency Bias:</tspan> Recent != Relevant for current task
        </text>
      </g>
    </g>
  </g>
  
  <!-- Token Budget Visualization -->
  <g transform="translate(100, 1050)">
    <text x="650" y="30" text-anchor="middle" font-family="Arial" font-size="20" font-weight="bold" fill="#2c3e50">
      TOKEN BUDGET ALLOCATION CHALLENGE
    </text>
    
    <!-- 64K Budget Breakdown -->
    <g transform="translate(0, 50)">
      <text x="300" y="20" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="#3498db">
        64K Context Window Budget
      </text>
      
      <rect x="0" y="30" width="600" height="40" fill="#ecf0f1" stroke="#bdc3c7" stroke-width="1" rx="3"/>
      
      <!-- System prompt -->
      <rect x="0" y="30" width="50" height="40" fill="#9b59b6" rx="3"/>
      <text x="25" y="52" text-anchor="middle" font-family="Arial" font-size="10" fill="white">
        System
      </text>
      <text x="25" y="85" text-anchor="middle" font-family="Arial" font-size="9" fill="#2c3e50">
        5K (8%)
      </text>
      
      <!-- Memory summaries -->
      <rect x="50" y="30" width="100" height="40" fill="#e74c3c" rx="3"/>
      <text x="100" y="52" text-anchor="middle" font-family="Arial" font-size="10" fill="white">
        Memory Summaries
      </text>
      <text x="100" y="85" text-anchor="middle" font-family="Arial" font-size="9" fill="#2c3e50">
        10K (15%)
      </text>
      
      <!-- Recent conversation -->
      <rect x="150" y="30" width="200" height="40" fill="#27ae60" rx="3"/>
      <text x="250" y="52" text-anchor="middle" font-family="Arial" font-size="10" fill="white">
        Recent Conversation
      </text>
      <text x="250" y="85" text-anchor="middle" font-family="Arial" font-size="9" fill="#2c3e50">
        35K (55%)
      </text>
      
      <!-- Current input -->
      <rect x="350" y="30" width="100" height="40" fill="#f39c12" rx="3"/>
      <text x="400" y="52" text-anchor="middle" font-family="Arial" font-size="10" fill="white">
        Current Input
      </text>
      <text x="400" y="85" text-anchor="middle" font-family="Arial" font-size="9" fill="#2c3e50">
        8K (12%)
      </text>
      
      <!-- Reserved for output -->
      <rect x="450" y="30" width="100" height="40" fill="#34495e" rx="3"/>
      <text x="500" y="52" text-anchor="middle" font-family="Arial" font-size="10" fill="white">
        Output Buffer
      </text>
      <text x="500" y="85" text-anchor="middle" font-family="Arial" font-size="9" fill="#ecf0f1">
        6K (10%)
      </text>
      
      <!-- Over-budget -->
      <rect x="550" y="30" width="50" height="40" fill="#e74c3c" opacity="0.7" rx="3"/>
      <text x="575" y="45" text-anchor="middle" font-family="Arial" font-size="9" fill="white">
        OVER
      </text>
      <text x="575" y="55" text-anchor="middle" font-family="Arial" font-size="9" fill="white">
        BUDGET
      </text>
    </g>
    
    <!-- 200K Budget Breakdown -->
    <g transform="translate(700, 50)">
      <text x="300" y="20" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="#27ae60">
        200K Context Window Budget
      </text>
      
      <rect x="0" y="30" width="600" height="40" fill="#ecf0f1" stroke="#bdc3c7" stroke-width="1" rx="3"/>
      
      <!-- System prompt -->
      <rect x="0" y="30" width="15" height="40" fill="#9b59b6" rx="3"/>
      <text x="7" y="52" text-anchor="middle" font-family="Arial" font-size="8" fill="white">S</text>
      <text x="15" y="85" text-anchor="middle" font-family="Arial" font-size="9" fill="#2c3e50">
        5K (2.5%)
      </text>
      
      <!-- Memory tree -->
      <rect x="15" y="30" width="120" height="40" fill="#e74c3c" rx="3"/>
      <text x="75" y="52" text-anchor="middle" font-family="Arial" font-size="10" fill="white">
        Memory Tree
      </text>
      <text x="75" y="85" text-anchor="middle" font-family="Arial" font-size="9" fill="#2c3e50">
        40K (20%)
      </text>
      
      <!-- Extended conversation -->
      <rect x="135" y="30" width="300" height="40" fill="#27ae60" rx="3"/>
      <text x="285" y="52" text-anchor="middle" font-family="Arial" font-size="10" fill="white">
        Extended Conversation History
      </text>
      <text x="285" y="85" text-anchor="middle" font-family="Arial" font-size="9" fill="#2c3e50">
        120K (60%)
      </text>
      
      <!-- Documents -->
      <rect x="435" y="30" width="80" height="40" fill="#8e44ad" rx="3"/>
      <text x="475" y="52" text-anchor="middle" font-family="Arial" font-size="10" fill="white">
        Documents
      </text>
      <text x="475" y="85" text-anchor="middle" font-family="Arial" font-size="9" fill="#2c3e50">
        20K (10%)
      </text>
      
      <!-- Current input -->
      <rect x="515" y="30" width="50" height="40" fill="#f39c12" rx="3"/>
      <text x="540" y="52" text-anchor="middle" font-family="Arial" font-size="9" fill="white">
        Input
      </text>
      <text x="540" y="85" text-anchor="middle" font-family="Arial" font-size="9" fill="#2c3e50">
        10K (5%)
      </text>
      
      <!-- Output buffer -->
      <rect x="565" y="30" width="35" height="40" fill="#34495e" rx="3"/>
      <text x="582" y="52" text-anchor="middle" font-family="Arial" font-size="9" fill="white">
        Out
      </text>
      <text x="582" y="85" text-anchor="middle" font-family="Arial" font-size="9" fill="#ecf0f1">
        5K (2.5%)
      </text>
    </g>
  </g>
  
  <!-- Bottom insight -->
  <text x="800" y="1180" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#7f8c8d">
    Context window packing is like playing Tetris with information - but the memory manager is blindfolded! 🧩🤖
  </text>
</svg>